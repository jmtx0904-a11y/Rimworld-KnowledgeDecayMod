name: Build RimWorld Mod

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Install .NET SDK
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '6.0.x'

    - name: Create fake RimWorld DLL references
      run: |
        mkdir -p RimWorld
        touch RimWorld/Assembly-CSharp.dll
        touch RimWorld/UnityEngine.dll

    - name: Build project
      run: |
        cd Source
        dotnet build KnowledgeDecay.csproj -c Release

    - name: Upload DLL
      uses: actions/upload-artifact@v4
      with:
        name: KnowledgeDecayDLL
        path: Source/bin/Release/**/*
